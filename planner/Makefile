# LangGraphJS Development Makefile

.PHONY: help dev build lint test clean install

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆ
help:
	@echo "åˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰:"
	@echo "  make setup      - å®Œå…¨ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"
	@echo "  make dev        - LangGraphé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•"
	@echo "  make dev-react  - Reacté–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•"
	@echo "  make build      - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ“ãƒ«ãƒ‰"
	@echo "  make lint       - ESLintã§ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯"
	@echo "  make test       - ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ"
	@echo "  make install    - ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"
	@echo "  make clean      - ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã‚’ã‚¯ãƒªãƒ¼ãƒ³"
	@echo "  make setup-env  - .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ"
	@echo "  make check-clerk - Clerkè¨­å®šã‚’ç¢ºèª"

# LangGraphé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
dev:
	@echo "ğŸš€ LangGraphé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ä¸­..."
	npx @langchain/langgraph-cli dev

# Reacté–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
dev-react:
	@echo "ğŸš€ Reacté–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ä¸­..."
	npm run dev

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ“ãƒ«ãƒ‰
build:
	@echo "ğŸ”¨ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ“ãƒ«ãƒ‰ä¸­..."
	npm run build

# ESLintã§ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯
lint:
	@echo "ğŸ” ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯ä¸­..."
	npm run lint

# ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
test:
	@echo "ğŸ§ª ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œä¸­..."
	npm test

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
install:
	@echo "ğŸ“¦ ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸­..."
	npm install

# ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã‚’ã‚¯ãƒªãƒ¼ãƒ³
clean:
	@echo "ğŸ§¹ ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ä¸­..."
	rm -rf dist/
	rm -rf node_modules/.cache/
	npm run build --clean

# ç’°å¢ƒè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
setup-env:
	@if [ ! -f .env ]; then \
		echo "ğŸ“ .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆä¸­..."; \
		cp .env.example .env; \
		echo "âœ… .envãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚"; \
		echo ""; \
		echo "ğŸ”§ å¿…è¦ãªè¨­å®š:"; \
		echo "  1. Anthropic APIã‚­ãƒ¼: https://console.anthropic.com/"; \
		echo "  2. Clerkèªè¨¼ã‚­ãƒ¼: https://dashboard.clerk.com/"; \
		echo "  3. LangSmith APIã‚­ãƒ¼ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): https://smith.langchain.com/"; \
		echo ""; \
		echo "ğŸ“ .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦APIã‚­ãƒ¼ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚"; \
	else \
		echo "â„¹ï¸  .envãƒ•ã‚¡ã‚¤ãƒ«ã¯æ—¢ã«å­˜åœ¨ã—ã¾ã™ã€‚"; \
	fi

# Clerkè¨­å®šã®ç¢ºèª
check-clerk:
	@echo "ğŸ” Clerkè¨­å®šã‚’ç¢ºèªä¸­..."
	@if [ -z "$$VITE_CLERK_PUBLISHABLE_KEY" ]; then \
		echo "âŒ VITE_CLERK_PUBLISHABLE_KEYãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“"; \
		echo "   Clerkãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰å–å¾—ã—ã¦ãã ã•ã„: https://dashboard.clerk.com/"; \
	else \
		echo "âœ… VITE_CLERK_PUBLISHABLE_KEY: è¨­å®šæ¸ˆã¿"; \
	fi
	@if [ -z "$$CLERK_SECRET_KEY" ]; then \
		echo "âŒ CLERK_SECRET_KEYãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“"; \
	else \
		echo "âœ… CLERK_SECRET_KEY: è¨­å®šæ¸ˆã¿"; \
	fi

# å®Œå…¨ãªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
setup:
	@echo "ğŸš€ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’é–‹å§‹..."
	make install
	make setup-env
	@echo ""
	@echo "âœ… ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†ï¼"
	@echo ""
	@echo "ğŸ“‹ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:"
	@echo "  1. .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦APIã‚­ãƒ¼ã‚’è¨­å®š"
	@echo "  2. make check-clerk ã§Clerkè¨­å®šã‚’ç¢ºèª"
	@echo "  3. make dev ã§LangGraphã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•"
	@echo "  4. make dev-react ã§Reactã‚¢ãƒ—ãƒªã‚’èµ·å‹•"
